package com.shop.service;

import java.util.Optional;

import javax.transaction.Transactional;

import org.springframework.stereotype.Service;

import com.shop.dto.MemberDto;
import com.shop.entity.MemberEntity;
import com.shop.repository.MemberRepository;

import lombok.RequiredArgsConstructor;

@Service
@RequiredArgsConstructor
@Transactional
public class MemberService implements MemberServiceImpl {

	private final MemberRepository memberRepository;

	public void save(MemberDto memberDto) {
		// repository의 save 메서드 호출 (조건. entity 객체를 넘겨줘야 함)
		// 첫번째로 할일은 dto를 entity로 변환하는 작업을 먼저 해줘야 한다.
		// 그러고 나서 두번째는 repository의 save 메서드를 호출하는 작업을 해줘야 한다.
		// 이것 말고도 다양한 방식이 있다.
		MemberEntity memberEntity = MemberEntity.toMemberEntity(memberDto);
		memberRepository.save(memberEntity);
		
		
	}

	@Override
	public MemberDto login(MemberDto memberDto) {
		
		// 1.회원이 입력한 아이디로 DB에서 조회함.
		// 2.DB에서 조회한 비밀번호와 사용자가 입력한 비밀번호가 일치하는지 판단
		// 우리가 실제 사용할 것은 엔티티 객체인데 그 엔티티 객체를 옵션널 객체로 한 번 더 감싼 개념이다.
		// 포장지가 2개라고 보면 된다. 요렇게 활용한다.
		Optional<MemberEntity> byMemberId = memberRepository.findByMemberId(memberDto.getMemberId());
		if(byMemberId.isPresent()) {
			// 조회 결과가 있다.(해당 이메일을 가진 회원 정보가 있다.)
			
		} else {
			// 조회 결과가 없다.(해당 이메일을 가진 회원이 없다.)
			return null;
		}
		
	}

}
